# IDirectFBSurface 接口

`IDirectFBSurface` 接口提供了多种操作，用于处理DirectFB中的表面（Surface）。

## 信息检索

| 方法                    | 描述                                   |
| ----------------------- | -------------------------------------- |
| **GetCapabilities**     | 返回此表面的能力。                     |
| **GetPosition**         | 获取表面的像素位置。                   |
| **GetSize**             | 获取表面的宽度和高度（像素）。         |
| **GetVisibleRectangle** | 返回相对于此表面的可视矩形。           |
| **GetPixelFormat**      | 获取当前的像素格式。                   |
| **GetColorSpace**       | 获取当前的颜色空间。                   |
| **GetAccelerationMask** | 获取当前设置下硬件加速的绘图函数掩码。 |

## 调色板 & Alpha Ramp

| 方法             | 描述                                          |
| ---------------- | --------------------------------------------- |
| **GetPalette**   | 获取访问表面的调色板。                        |
| **SetPalette**   | 更改表面的调色板。                            |
| **SetAlphaRamp** | 设置具有一个或两个Alpha位的格式的Alpha Ramp。 |

## 缓冲区操作

| 方法                     | 描述                                 |
| ------------------------ | ------------------------------------ |
| **GetStereoEye**         | 获取当前的立体视觉。                 |
| **SetStereoEye**         | 选择未来操作的立体视觉。             |
| **Lock**                 | 锁定表面以指定的访问类型。           |
| **GetFramebufferOffset** | 已废弃。总是返回 DFB_FAILURE。       |
| **Unlock**               | 在直接访问后解锁表面。               |
| **Flip**                 | 翻转/更新表面缓冲区。                |
| **FlipStereo**           | 翻转/更新立体表面缓冲区。            |
| **SetField**             | 设置活动场。                         |
| **Clear**                | 清除表面及其深度缓冲区（如果存在）。 |

## 绘图/传输控制

| 方法                    | 描述                                                       |
| ----------------------- | ---------------------------------------------------------- |
| **SetClip**             | 设置用于限制绘图、传输和文本函数区域的裁剪区域。           |
| **GetClip**             | 获取用于限制绘图、传输和文本函数区域的裁剪区域。           |
| **SetColor**            | 设置用于绘图/文本函数或 Alpha/颜色调制（传输函数）的颜色。 |
| **SetColorIndex**       | 使用颜色/Alpha查找表的索引设置颜色。                       |
| **SetSrcBlendFunction** | 设置应用于源的混合函数。                                   |
| **SetDstBlendFunction** | 设置应用于目标的混合函数。                                 |
| **SetPorterDuff**       | 通过指定 Porter/Duff 规则来设置源和目标混合函数。          |
| **SetSrcColorKey**      | 设置源颜色键。                                             |
| **SetSrcColorKeyIndex** | 使用颜色/Alpha查找表的索引设置源颜色键。                   |
| **SetDstColorKey**      | 设置目标颜色键。                                           |
| **SetDstColorKeyIndex** | 使用颜色/Alpha查找表的索引设置目标颜色键。                 |

## 传输函数

| 方法                 | 描述                         |
| -------------------- | ---------------------------- |
| **SetBlittingFlags** | 为所有后续传输命令设置标志。 |
| **Blit**             | 从源传输到此表面。           |
| **TileBlit**         | 将源平铺到此表面。           |
| **BatchBlit**        | 一次传输多个区域。           |
| **StretchBlit**      | 从源缩放到目标矩形。         |
| **TextureTriangles** | 初步的纹理映射支持。         |

## 绘图函数

| 方法                | 描述                                 |
| ------------------- | ------------------------------------ |
| **SetDrawingFlags** | 为所有后续绘图命令设置标志。         |
| **FillRectangle**   | 使用给定颜色填充指定矩形。           |
| **DrawRectangle**   | 使用给定颜色绘制指定矩形的轮廓。     |
| **DrawLine**        | 使用给定颜色绘制从一点到另一点的线。 |
| **DrawLines**       | 使用给定颜色绘制多条线。             |
| **FillTriangle**    | 填充非纹理三角形。                   |
| **FillRectangles**  | 一次调用填充多个矩形。               |
| **FillSpans**       | 填充由 x 和宽度指定的跨度。          |
| **FillTriangles**   | 一次调用填充多个三角形。             |

## 文本函数

| 方法            | 描述                                          |
| --------------- | --------------------------------------------- |
| **SetFont**     | 设置 DrawString() 和 DrawGlyph() 使用的字体。 |
| **GetFont**     | 获取与表面关联的字体。                        |
| **DrawString**  | 在指定位置绘制字符串。                        |
| **DrawGlyph**   | 在指定位置绘制单个字形。                      |
| **SetEncoding** | 更改用于文本渲染的编码。                      |

## 轻量级助手

| 方法               | 描述                                 |
| ------------------ | ------------------------------------ |
| **GetSubSurface**  | 获取此表面的子区域接口。             |
| **MakeSubSurface** | 使此成为子表面或调整此子表面的矩形。 |

## OpenGL

| 方法      | 描述                             |
| --------- | -------------------------------- |
| **GetGL** | 获取此表面的唯一 OpenGL 上下文。 |

## 调试

| 方法                    | 描述                             |
| ----------------------- | -------------------------------- |
| **Dump**                | 将表面内容转储到一个或两个文件。 |
| **DisableAcceleration** | 禁用硬件加速。                   |

## 资源

| 方法              | 描述                     |
| ----------------- | ------------------------ |
| **ReleaseSource** | 释放对源表面的可能引用。 |

## 传输控制

| 方法                    | 描述             |
| ----------------------- | ---------------- |
| **SetIndexTranslation** | 设置索引转换表。 |

## 渲染

| 方法                 | 描述                               |
| -------------------- | ---------------------------------- |
| **SetRenderOptions** | 设置影响绘图和传输操作输出的选项。 |

## 绘图/传输控制

| 方法              | 描述                     |
| ----------------- | ------------------------ |
| **SetMatrix**     | 设置转换矩阵。           |
| **SetSourceMask** | 设置用于传输的掩码表面。 |

## 直接读写

| 方法      | 描述                            |
| --------- | ------------------------------- |
| **Write** | 无需（Un）Lock 直接写入表面。   |
| **Read**  | 无需（Un）Lock 直接从表面读取。 |

## 绘图/传输控制

| 方法           | 描述                                             |
| -------------- | ------------------------------------------------ |
| **SetColors**  | 设置用于绘图/文本函数或 Alpha/颜色调制的颜色值。 |
| **BatchBlit2** | 使用次源而不是目标一次性传输多个区域。           |

## 缓冲区操作

| 方法                   | 描述                     |
| ---------------------- | ------------------------ |
| **GetPhysicalAddress** | 返回锁定表面的物理地址。 |

## 绘图函数

| 方法               | 描述                   |
| ------------------ | ---------------------- |
| **FillTrapezoids** | 一次调用填充多个梯形。 |

## 绘图/传输控制

| 方法                       | 描述                    |
| -------------------------- | ----------------------- |
| **SetWriteMaskBits**       | 设置写掩码位。          |
| **SetRop**                 | 设置 Rop 操作相关参数。 |
| **SetSrcColorKeyExtended** | 设置扩展的源颜色键。    |
| **SetDstColorKeyExtended** | 设置扩展的目标颜色键。  |

## 绘图函数

| 方法               | 描述                       |
| ------------------ | -------------------------- |
| **DrawMonoGlyphs** | 使用属性传输单色字形数据。 |

## 传输控制

| 方法                  | 描述               |
| --------------------- | ------------------ |
| **SetSrcColorMatrix** | 设置源颜色矩阵。   |
| **SetSrcConvolution** | 设置源卷积滤波器。 |

## 信息检索

| 方法      | 描述                |
| --------- | ------------------- |
| **GetID** | 获取唯一的表面 ID。 |

## 进程安全

| 方法            | 描述       |
| --------------- | ---------- |
| **AllowAccess** | 允许访问。 |

## 事件缓冲区

| 方法                  | 描述                           |
| --------------------- | ------------------------------ |
| **CreateEventBuffer** | 为此表面创建并附加事件缓冲区。 |
| **AttachEventBuffer** | 将现有事件缓冲区附加到此表面。 |
| **DetachEventBuffer** | 从此表面分离事件缓冲区。       |

## 传输函数

| 方法                 | 描述                           |
| -------------------- | ------------------------------ |
| **BatchStretchBlit** | 从源缩放到目标矩形的多个区域。 |

## 客户端

| 方法           | 描述                         |
| -------------- | ---------------------------- |
| **MakeClient** | 进入客户端模式以进行帧同步。 |
| **FrameAck**   | 进入客户端模式以进行帧同步。 |

## 调试

| 方法        | 描述                                       |
| ----------- | ------------------------------------------ |
| **DumpRaw** | 以原始格式将表面内容转储到一个或两个文件。 |

## 定时

| 方法                   | 描述                           |
| ---------------------- | ------------------------------ |
| **GetFrameTime**       | 检索下一个要渲染的帧的时间戳。 |
| **SetFrameTimeConfig** | 设置 GetFrameTime 的配置。     |